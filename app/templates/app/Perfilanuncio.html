{% extends "app/layout.html" %}
{% load static %}
{% load Filtrospersonalizado %}
{% block content %}
<section class="py-5">
    <div class="container px-3">
        <div class="card mb-3 shadow border-0">
            <div class="row g-0">
                <div class="col-md-6 p-2">
                    <div id="carouselExampleSlidesOnly" class="carousel slide rounded-3 my-3"  data-bs-ride="carousel">
                        <div class="carousel-inner">
                        {% for foto in habilidades.id|existing_Fototrabajo %}
                            {% get_active forloop.counter0 as dato%}
                            <div class="carousel-item {{ dato }}">
                                <img src="{{foto.fotoTrabajo.url}}" class="d-block w-100 rounded-3 my-3"  height="600px" style="object-fit: scale-down" alt="...">
                            </div>
                        {% empty %}
                            <div class="carousel-item active">
                                <img src="https://dummyimage.com/600x350/ced4da/6c757d&text=Sin+Imagen" class="d-block w-100 rounded-3 my-3" height="600px" style="object-fit: scale-down" alt="...">
                            </div>
                        {% endfor %}
                        </div>
                    </div>

                </div>
                <div class="col-md-6">
                    <div class="card-header h3 bg-transparent border-0 text-capitalize">{{habilidades.nombrehabilidad}}</div>
                    <div class="card-body">
                    <div class="card-title">
                        <div class="d-flex align-items-center">
                            <div class="small">
                                <div class="text-muted">Trabajos realizados: {{habilidades.nomeroTrabjos}}</div>
                                <div class="bg-gradient mb-2 rating"  data-rateyo-rating="5"></div>
                            </div>
                        </div>
                    </div>
                    <p class="card-text" style="min-height: 31vh">{{habilidades.descripcion}}.</p>
                    </div>

                    <div class="d-grid d-sm-flex justify-content-sm-center justify-content-xl-center py-3 card-footer border-0">
                        <form action="{% url 'SoliPedidos' %}" method="post">{% csrf_token %}
                            <input type="hidden" name="id" value="{{habilidades.id}}" readonly>
                            <button type="submit" class="btn btn-primary btn-lg px-4 me-sm-3" >Adquirir Servicios</button>
                        </form>
                        <form action="{% url 'Favorite' %}" method="post">
                            {% csrf_token %}
                            <input type="hidden" name="txtCodigo" value="{{habilidades.id}}" readonly>
                            <button class="btn btn-danger btn-lg" type="submit"><i class="fa-regular fa-heart"></i><span class="badge" id="favoritenum">4</span></button>
                        </form>
                    </div>

                </div>
            </div>
        </div>    
        <section>
            
        </section>
        {% include 'app/Mensaje.html' %}
    </div>
</section>
<!-- Comments section-->
<section class="py-5 bg-light">
    <div class="container px-3">
        <div class="row gx-5">
            <div class="col-xl-9">
                <div class="card bg-light">
                    <div class="card-body">
                        <!-- Comment form-->
                        <form class="mb-4"><textarea class="form-control" rows="3" placeholder="Join the discussion and leave a comment!"></textarea></form>
                        <!-- Comment with nested comments-->
                        <div class="d-flex mb-4">
                            <!-- Parent comment-->
                            <div class="flex-shrink-0"><img class="rounded-circle" src="https://dummyimage.com/50x50/ced4da/6c757d.jpg" alt="..." /></div>
                            <div class="ms-3">
                                <div class="fw-bold">Commenter Name</div>
                                If you're going to lead a space frontier, it has to be government; it'll never be private enterprise. Because the space frontier is dangerous, and it's expensive, and it has unquantified risks.
                                <!-- Child comment 1-->
                                <div class="d-flex mt-4">
                                    <div class="flex-shrink-0"><img class="rounded-circle" src="https://dummyimage.com/50x50/ced4da/6c757d.jpg" alt="..." /></div>
                                    <div class="ms-3">
                                        <div class="fw-bold">Commenter Name</div>
                                        And under those conditions, you cannot establish a capital-market evaluation of that enterprise. You can't get investors.
                                    </div>
                                </div>
                                <!-- Child comment 2-->
                                <div class="d-flex mt-4">
                                    <div class="flex-shrink-0"><img class="rounded-circle" src="https://dummyimage.com/50x50/ced4da/6c757d.jpg" alt="..." /></div>
                                    <div class="ms-3">
                                        <div class="fw-bold">Commenter Name</div>
                                        When you put money directly to a problem, it makes a good headline.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Single comment-->
                        <div class="d-flex">
                            <div class="flex-shrink-0"><img class="rounded-circle" src="https://dummyimage.com/50x50/ced4da/6c757d.jpg" alt="..." /></div>
                            <div class="ms-3">
                                <div class="fw-bold">Commenter Name</div>
                                When I look at the universe and all the ways the universe wants to kill us, I find it hard to reconcile that with statements of beneficence.
                            </div>
                        </div>
                        <!-- Single comment-->
                        <div class="d-flex">
                            <div class="flex-shrink-0"><img class="rounded-circle" src="https://dummyimage.com/50x50/ced4da/6c757d.jpg" alt="..." /></div>
                            <div class="ms-3">
                                <div class="fw-bold">Commenter Name</div>
                                When I look at the universe and all the ways the universe wants to kill us, I find it hard to reconcile that with statements of beneficence.
                            </div>
                        </div>
                        <!-- Single comment-->
                        <div class="d-flex">
                            <div class="flex-shrink-0"><img class="rounded-circle" src="https://dummyimage.com/50x50/ced4da/6c757d.jpg" alt="..." /></div>
                            <div class="ms-3">
                                <div class="fw-bold">Commenter Name</div>
                                When I look at the universe and all the ways the universe wants to kill us, I find it hard to reconcile that with statements of beneficence.
                            </div>
                        </div>
                        <!-- Single comment-->
                        <div class="d-flex">
                            <div class="flex-shrink-0"><img class="rounded-circle" src="https://dummyimage.com/50x50/ced4da/6c757d.jpg" alt="..." /></div>
                            <div class="ms-3">
                                <div class="fw-bold">Commenter Name</div>
                                When I look at the universe and all the ways the universe wants to kill us, I find it hard to reconcile that with statements of beneficence.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-3">
                <div class="card border-0">
                    <div class="card-body p-4">
                        <div class="d-flex h-100 align-items-center justify-content-center">
                            <div class="text-center">

                                <div class="h6 fw-bolder">Datos personales</div>
                                <img class="img-fluid rounded-circle mb-4 px-4" src="{{Foto_perfil.imagen.url}}" alt="..." />

                                <div class="h6 fw-bolder">{{ habilidades.user.first_name }} {{ habilidades.user.last_name }}</div>
                                <p class="text-muted mb-4"><a href="#!">{{ habilidades.user.email }}</a></p>

                                <div class="h6 fw-bolder">Redes Sociales</div>
                                <a class="fs-5 px-2 link-dark" href="#!"><i class="fa-brands fa-twitter"></i></a>
                                <a class="fs-5 px-2 link-dark" href="#!"><i class="fa-brands fa-facebook"></i></a>
                                <a class="fs-5 px-2 link-dark" href="#!"><i class="fa-brands fa-whatsapp"></i></a>
                                <hr>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
{% block Script %}
<script>
   //<button class="btn btn-danger btn-lg" onclick="change()"><i class="fa-regular fa-heart"></i><span class="badge" id="favoritenum">4</span></button>
    function change(){
        var habili='{{habilidades.id}}';
        $.ajax({
            type: "GET",
            url: "{% url 'Favorite' %}",
            data : {'habili': habili},
            success: function (data) { 
               // document.location.reload(true);
                $("#favoritenum").html(data['success']); 
                    if(data.not_authenticated) {

                        window.location.replace("{% url 'login' %}");
                    }
                    else {
                        toastr.success(data.message);
                    }  
                },
            error: function(rs, e) {
                    alert(rs.responseText);
                }
        });
    };
</script>
{% endblock %}
